The code using yield to mimic the process switch which create micro  process with context exchange.