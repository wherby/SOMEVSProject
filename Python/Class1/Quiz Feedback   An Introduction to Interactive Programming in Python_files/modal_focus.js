var ModalFocus={};ModalFocus.selector="a, input, textarea, select, iframe",ModalFocus.modalElem=$(),ModalFocus.foregroundElems=$(),ModalFocus.backgroundElems=$(),ModalFocus.focusIndex=0,ModalFocus.enable=function(e){ModalFocus.disable(),ModalFocus.modalElem=$(e),ModalFocus.foregroundElems=ModalFocus.modalElem.find(ModalFocus.selector),0!==ModalFocus.foregroundElems.length&&(ModalFocus.backgroundElems=$(ModalFocus.selector).not(ModalFocus.foregroundElems),ModalFocus.foregroundElems.add(ModalFocus.backgroundElems).each(function(e,t){var n=$(t),i=n.attr("tabindex");i!==void 0?n.data("tabindex",null):n.data("tabindex",i)}),ModalFocus.foregroundElems.each(function(e,t){var n=$(t);n.attr("tabindex",e+1)}),ModalFocus.backgroundElems.attr("tabindex",-1),ModalFocus.foregroundElems.bind("focus.modalfocus",function(){ModalFocus.focusIndex=$(this).attr("tabindex")}),ModalFocus.backgroundElems.bind("focus.modalfocus",function(){ModalFocus.focusIndex>1?ModalFocus.foregroundElems.first().focus():ModalFocus.foregroundElems.last().focus()}),ModalFocus.foregroundElems.not(".close").not("[disabled=disabled], [readonly=readonly]").first().focus())},ModalFocus.disable=function(){ModalFocus.foregroundElems.unbind("focus.modalfocus"),ModalFocus.backgroundElems.unbind("focus.modalfocus"),ModalFocus.foregroundElems.add(ModalFocus.backgroundElems).each(function(e,t){var n=$(t),i=n.data("tabindex");null===i?n.removeAttr("tabindex"):n.attr("tabindex",i)}),ModalFocus.modalElem=$(),ModalFocus.foregroundElems=$(),ModalFocus.backgroundElems=$(),ModalFocus.focusIndex=0};